<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analysis Prompts - AzFilesOptimizer</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .prompts-container { padding: 20px; }
        .prompts-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .prompts-list { display: grid; gap: 15px; }
        .prompt-card { 
            border: 1px solid #ddd; 
            border-radius: 6px; 
            padding: 20px; 
            background: white;
            cursor: move;
            transition: all 0.2s;
        }
        .prompt-card:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .prompt-card.disabled { opacity: 0.6; background: #f5f5f5; }
        .prompt-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .prompt-priority { 
            background: #2196f3; 
            color: white; 
            padding: 4px 12px; 
            border-radius: 20px; 
            font-weight: 600; 
            font-size: 13px;
        }
        .prompt-name { font-size: 18px; font-weight: 600; margin: 10px 0; }
        .prompt-category { 
            display: inline-block; 
            padding: 4px 10px; 
            border-radius: 4px; 
            font-size: 12px; 
            font-weight: 600;
        }
        .category-exclusion { background: #ffebee; color: #c62828; }
        .category-detection { background: #e3f2fd; color: #1565c0; }
        .category-assessment { background: #f3e5f5; color: #6a1b9a; }
        .prompt-actions { display: flex; gap: 10px; }
        .toggle-switch { 
            position: relative; 
            width: 50px; 
            height: 26px;
            background: #ccc;
            border-radius: 13px;
            cursor: pointer;
            transition: 0.3s;
        }
        .toggle-switch.on { background: #4caf50; }
        .toggle-slider { 
            position: absolute; 
            width: 22px; 
            height: 22px; 
            background: white; 
            border-radius: 50%; 
            top: 2px; 
            left: 2px;
            transition: 0.3s;
        }
        .toggle-switch.on .toggle-slider { left: 26px; }
        .btn { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .btn-primary { background: #2196f3; color: white; }
        .btn-success { background: #4caf50; color: white; }
        .btn-danger { background: #f44336; color: white; }
        .btn-sm { padding: 6px 12px; font-size: 12px; }
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1000;
            overflow-y: auto;
        }
        .modal.show { display: flex; align-items: center; justify-content: center; }
        .modal-content { 
            background: white; 
            border-radius: 8px; 
            padding: 30px; 
            max-width: 800px; 
            width: 90%; 
            max-height: 90vh; 
            overflow-y: auto;
        }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 5px; }
        .form-group input, .form-group textarea, .form-group select { 
            width: 100%; 
            padding: 8px; 
            border: 1px solid #ddd; 
            border-radius: 4px; 
        }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .variable-picker { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 8px; 
            margin-top: 10px;
        }
        .variable-tag { 
            background: #e3f2fd; 
            padding: 5px 10px; 
            border-radius: 4px; 
            cursor: pointer; 
            font-size: 12px;
            font-family: monospace;
        }
        .variable-tag:hover { background: #bbdefb; }
        .stop-conditions { 
            border: 1px solid #ddd; 
            border-radius: 4px; 
            padding: 15px; 
            background: #f9f9f9; 
        }
        .empty-state { text-align: center; padding: 60px 20px; color: #999; }
    </style>
</head>
<body>
    <header>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h1>AzFilesOptimizer</h1>
            <div id="auth-section">
                <div id="signed-out-view" style="display: none;">
                    <button class="btn" onclick="window.location.href='index.html'" style="background-color: white; color: var(--primary-color);">Sign In</button>
                </div>
                <div id="signed-in-view" style="display: none;">
                    <span id="user-name" style="color: white; margin-right: 1rem;"></span>
                    <button class="btn" onclick="window.location.href='index.html'" style="background-color: transparent; border: 1px solid white;">Home</button>
                </div>
            </div>
        </div>
    </header>
    
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="jobs.html">Jobs</a></li>
            <li><a href="workload-profiles.html">Workload Profiles</a></li>
            <li><a href="analysis-prompts.html" class="active">Analysis Prompts</a></li>
            <li><a href="volume-analysis.html">Volume Analysis</a></li>
            <li><a href="volume-chat.html">AI Assistant</a></li>
            <li><a href="settings.html">Settings</a></li>
        </ul>
    </nav>
    
    <main>

        <div class="prompts-container">
            <div class="prompts-header">
                <h2>Configured Analysis Prompts</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-success" onclick="analysisPrompts.createNew()">+ New Prompt</button>
                    <button class="btn btn-primary" onclick="analysisPrompts.seedPrompts()">Seed Default Prompts</button>
                    <button class="btn btn-primary" onclick="analysisPrompts.saveOrder()">Save Order</button>
                </div>
            </div>

            <div id="promptsList" class="prompts-list"></div>
        </div>
    </main>

    <div id="promptModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle">Edit Prompt</h2>
            <div id="modalBody"></div>
        </div>
    </div>

    <script src="js/lib/msal-browser.min.js"></script>
    <script src="js/auth-config.js"></script>
    <script src="js/auth-manager.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/analysis-prompts.js"></script>
</body>
</html>
